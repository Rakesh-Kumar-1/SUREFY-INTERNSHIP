PORT=5000
DB_USER='postgres'
DB_HOST='db'
DB_NAME='postgres'
DB_PASSWORD = 'pass12345'
DB_PORT=5432


CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL
);

CREATE TABLE events (
  id SERIAL PRIMARY KEY,
  title TEXT NOT NULL,
  datetime TIMESTAMP NOT NULL,
  location TEXT NOT NULL,
  capacity INT CHECK (capacity > 0 AND capacity <= 1000)
);


CREATE TABLE registrations (
  user_id INT REFERENCES users(id),
  event_id INT REFERENCES events(id),
  PRIMARY KEY (user_id, event_id)
);


✅ 1. Create Event
▶️ Method: POST
📍 Endpoint: /events

🔼 Request Body:
json
Copy
Edit
{
  "title": "Node.js Workshop",
  "datetime": "2025-08-01T18:00:00Z",
  "location": "Bangalore",
  "capacity": 100
}
🔽 Success Response:
Status: 201 Created

json
Copy
Edit
{
  "eventId": 5
}
🔽 Error Example:
Status: 400 Bad Request

json
Copy
Edit
{
  "error": "Invalid input or capacity exceeds limit"
}
✅ 2. Get Event Details
▶️ Method: GET
📍 Endpoint: /events/:id

🔼 Example:
bash
Copy
Edit
GET /events/5
🔽 Response:
json
Copy
Edit
{
  "id": 5,
  "title": "Node.js Workshop",
  "datetime": "2025-08-01T18:00:00.000Z",
  "location": "Bangalore",
  "capacity": 100,
  "registrations": [
    {
      "id": 1,
      "name": "Alice",
      "email": "alice@example.com"
    }
  ]
}
✅ 3. Register for Event
▶️ Method: POST
📍 Endpoint: /events/:id/register

🔼 Request Body:
json
Copy
Edit
{
  "userId": 1
}
🔽 Success:
Status: 201 Created

json
Copy
Edit
{
  "message": "User registered successfully"
}
🔽 Error (Already Registered):
Status: 409 Conflict

json
Copy
Edit
{
  "error": "Already registered"
}
🔽 Error (Event Full):
Status: 400 Bad Request

json
Copy
Edit
{
  "error": "Event is full"
}
✅ 4. Cancel Registration
▶️ Method: POST
📍 Endpoint: /events/:id/cancel

🔼 Request Body:
json
Copy
Edit
{
  "userId": 1
}
🔽 Success:
json
Copy
Edit
{
  "message": "Registration canceled"
}
🔽 Error:
Status: 404 Not Found

json
Copy
Edit
{
  "error": "Registration not found"
}
✅ 5. List Upcoming Events
▶️ Method: GET
📍 Endpoint: /events/upcoming/all

🔽 Response:
json
Copy
Edit
[
  {
    "id": 3,
    "title": "Tech Meetup",
    "datetime": "2025-08-05T14:00:00.000Z",
    "location": "Chennai",
    "capacity": 100
  },
  {
    "id": 4,
    "title": "Node.js Workshop",
    "datetime": "2025-08-05T14:00:00.000Z",
    "location": "Mumbai",
    "capacity": 100
  }
]
✅ Sorted first by datetime, then by location (A→Z)

✅ 6. Get Event Stats
▶️ Method: GET
📍 Endpoint: /events/:id/stats

🔽 Response:
json
Copy
Edit
{
  "totalRegistrations": 80,
  "remainingCapacity": 20,
  "percentUsed": "80.00%"
}