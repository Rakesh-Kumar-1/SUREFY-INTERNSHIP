PORT=5000
DB_USER='postgres'
DB_HOST='db'
DB_NAME='postgres'
DB_PASSWORD = 'pass12345'
DB_PORT=5432


CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL
);

CREATE TABLE events (
  id SERIAL PRIMARY KEY,
  title TEXT NOT NULL,
  datetime TIMESTAMP NOT NULL,
  location TEXT NOT NULL,
  capacity INT CHECK (capacity > 0 AND capacity <= 1000)
);


CREATE TABLE registrations (
  user_id INT REFERENCES users(id),
  event_id INT REFERENCES events(id),
  PRIMARY KEY (user_id, event_id)
);


âœ… 1. Create Event
â–¶ï¸ Method: POST
ðŸ“ Endpoint: /events

ðŸ”¼ Request Body:
json
Copy
Edit
{
  "title": "Node.js Workshop",
  "datetime": "2025-08-01T18:00:00Z",
  "location": "Bangalore",
  "capacity": 100
}
ðŸ”½ Success Response:
Status: 201 Created

json
Copy
Edit
{
  "eventId": 5
}
ðŸ”½ Error Example:
Status: 400 Bad Request

json
Copy
Edit
{
  "error": "Invalid input or capacity exceeds limit"
}
âœ… 2. Get Event Details
â–¶ï¸ Method: GET
ðŸ“ Endpoint: /events/:id

ðŸ”¼ Example:
bash
Copy
Edit
GET /events/5
ðŸ”½ Response:
json
Copy
Edit
{
  "id": 5,
  "title": "Node.js Workshop",
  "datetime": "2025-08-01T18:00:00.000Z",
  "location": "Bangalore",
  "capacity": 100,
  "registrations": [
    {
      "id": 1,
      "name": "Alice",
      "email": "alice@example.com"
    }
  ]
}
âœ… 3. Register for Event
â–¶ï¸ Method: POST
ðŸ“ Endpoint: /events/:id/register

ðŸ”¼ Request Body:
json
Copy
Edit
{
  "userId": 1
}
ðŸ”½ Success:
Status: 201 Created

json
Copy
Edit
{
  "message": "User registered successfully"
}
ðŸ”½ Error (Already Registered):
Status: 409 Conflict

json
Copy
Edit
{
  "error": "Already registered"
}
ðŸ”½ Error (Event Full):
Status: 400 Bad Request

json
Copy
Edit
{
  "error": "Event is full"
}
âœ… 4. Cancel Registration
â–¶ï¸ Method: POST
ðŸ“ Endpoint: /events/:id/cancel

ðŸ”¼ Request Body:
json
Copy
Edit
{
  "userId": 1
}
ðŸ”½ Success:
json
Copy
Edit
{
  "message": "Registration canceled"
}
ðŸ”½ Error:
Status: 404 Not Found

json
Copy
Edit
{
  "error": "Registration not found"
}
âœ… 5. List Upcoming Events
â–¶ï¸ Method: GET
ðŸ“ Endpoint: /events/upcoming/all

ðŸ”½ Response:
json
Copy
Edit
[
  {
    "id": 3,
    "title": "Tech Meetup",
    "datetime": "2025-08-05T14:00:00.000Z",
    "location": "Chennai",
    "capacity": 100
  },
  {
    "id": 4,
    "title": "Node.js Workshop",
    "datetime": "2025-08-05T14:00:00.000Z",
    "location": "Mumbai",
    "capacity": 100
  }
]
âœ… Sorted first by datetime, then by location (Aâ†’Z)

âœ… 6. Get Event Stats
â–¶ï¸ Method: GET
ðŸ“ Endpoint: /events/:id/stats

ðŸ”½ Response:
json
Copy
Edit
{
  "totalRegistrations": 80,
  "remainingCapacity": 20,
  "percentUsed": "80.00%"
}